<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todo Application</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      h1 {
        text-align: center;
      }
      form {
        max-width: 500px;
        margin: 0 auto;
      }
      input,
      textarea {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      button {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        margin: 5px;
      }
      button.add {
        background-color: #007bff;
        color: white;
      }
      button.reset {
        background-color: #6c757d;
        color: white;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      table,
      th,
      td {
        border: 1px solid #ddd;
      }
      th,
      td {
        padding: 10px;
        text-align: left;
      }
      .action-buttons button {
        padding: 5px 10px;
      }
      .remove {
        background-color: #dc3545;
        color: white;
      }
      .update {
        background-color: #ffc107;
        color: white;
      }
      .no-data {
        text-align: center;
        color: #888;
      }
      .completed {
        background-color: green;
        color: white;
        padding: 3px 8px;
        border-radius: 5px;
        cursor: pointer;
      }
      .pending {
        background-color: red;
        color: white;
        padding: 3px 8px;
        border-radius: 5px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>Todo Application</h1>

    <form id="todo-form">
      <label for="title">Title</label>
      <input type="text" id="title" placeholder="Enter title" required />

      <label for="description">Description</label>
      <textarea
        id="description"
        rows="3"
        placeholder="Enter description"
        required
      ></textarea>

      <button type="button" class="reset" id="reset-btn">Reset</button>
      <button type="button" class="add" id="add-btn">Add</button>
    </form>

    <table id="todo-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Description</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <script>
      let todos = [];
      let editIndex = -1;
      const todoForm = document.getElementById("todo-form");
      const titleInput = document.getElementById("title");
      const descriptionInput = document.getElementById("description");
      const addButton = document.getElementById("add-btn");
      const todoTable = document
        .getElementById("todo-table")
        .getElementsByTagName("tbody")[0];

      function generateRandomID(n) {
        let characters =
          "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
        let id = "todo-";
        for (let i = 0; i < n; i++) {
          let randomIndex = Math.floor(Math.random() * characters.length);
          id += characters[randomIndex];
        }
        return id;
      }

      function resetForm() {
        titleInput.value = "";
        descriptionInput.value = "";
        editIndex = -1;
        addButton.textContent = "Add";
      }

      function renderTodos() {
        todoTable.innerHTML = "";

        if (todos.length === 0) {
          const noDataRow = document.createElement("tr");
          noDataRow.innerHTML = `
                    <td colspan="4" class="no-data">No Data</td>
                `;
          todoTable.appendChild(noDataRow);
        } else {
          todos.forEach((todo, index) => {
            const row = document.createElement("tr");
            row.innerHTML = `
                        <td>${todo.id}</td>
                        <td>
                            ${todo.title} - <span class="${
              todo.status ? "completed" : "pending"
            }" onclick="toggleStatus(${index})">
                            ${todo.status ? "Completed" : "Pending"}</span>
                        </td>
                        <td>${todo.description}</td>
                        <td class="action-buttons">
                            <button class="remove" onclick="removeTodo(${index})">Remove</button>
                            <button class="update" onclick="editTodo(${index})">Update</button>
                        </td>
                    `;
            todoTable.appendChild(row);
          });
        }
      }

      function addOrUpdateTodo() {
        if (editIndex === -1) {
          const newTodo = {
            id: generateRandomID(4),
            title: titleInput.value,
            description: descriptionInput.value,
            status: false,
          };
          todos.push(newTodo);
        } else {
          todos[editIndex].title = titleInput.value;
          todos[editIndex].description = descriptionInput.value;
        }

        renderTodos();
        resetForm();
      }

      function removeTodo(index) {
        todos.splice(index, 1);
        renderTodos();
      }

      function editTodo(index) {
        titleInput.value = todos[index].title;
        descriptionInput.value = todos[index].description;
        editIndex = index;
        addButton.textContent = "Update";
      }

      function toggleStatus(index) {
        todos[index].status = !todos[index].status;
        renderTodos();
      }

      document
        .getElementById("add-btn")
        .addEventListener("click", addOrUpdateTodo);
      document.getElementById("reset-btn").addEventListener("click", resetForm);

      renderTodos();
    </script>
  </body>
</html>
